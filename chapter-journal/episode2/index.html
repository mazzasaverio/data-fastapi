<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Episode2 - FastAPI Your Data Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Episode2";
        var mkdocs_page_input_path = "chapter-journal/episode2.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> FastAPI Your Data Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../getting-started/installation.md">Getting Started</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/mkdocs-setup-and-usage-guide/">MkDocs Setup and Usage Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/how-to-create-a-changelog/">How to Create a Changelog</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">FastAPI Your Data Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Episode2</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="a-step-back-and-pgvector-for-fastapi-your-data-episode-2">A step back and pgvector for … (FastAPI Your Data - Episode 2)</h2>
<p>In this second episode of our project journey, I've made significant changes to the backend structure. The decision to focus primarily on a streamlined version means that what will eventually evolve into sub-applications are currently functioning as API routes. This approach is driven by the desire to first achieve a complete backend and frontend integration for a single sub-application. Despite not having a detailed plan at this stage, the myriad of topics needing exploration, study, and testing makes a rigid plan less practical. For instance, today, I spent more time than anticipated deciding on a vector database, eventually settling on pgvector for seamless integration with PostgreSQL. The significance of vector databases will become more apparent as we delve into modules involving natural language processing.</p>
<h3 id="github-projects-and-repos-search">GitHub Projects and Repos Search</h3>
<p>One of the modules I'm excited to introduce and test involves searching GitHub projects and repositories based on criteria beyond the filters GitHub offers. I aim to enable searches based on project descriptions and README files, assigning scores based on my skills, goals, and interests. To this end, I've started with a basic script that fetches READMEs from GitHub users, extracts the content, and performs embedding, as shown below:</p>
<pre><code class="language-python">import requests
from app.api.v1.endpoints.utils.github_api import GitHubAPI
from tqdm import tqdm
from loguru import logger

def fetch_users_by_location(location, max_users, access_token):
    users = []
    url = f&quot;https://api.github.com/search/users?q=location:{location}&amp;per_page={max_users}&quot;
    headers = {&quot;Authorization&quot;: f&quot;token {access_token}&quot;}

    try:
        response = requests.get(url, headers=headers).json()
        users.extend(response.get(&quot;items&quot;, []))
        logger.info(f&quot;Successfully fetched {len(users)} users from location: {location}&quot;)
    except Exception as e:
        logger.error(f&quot;Failed to fetch users from location: {location}. Error: {e}&quot;)

    return users
</code></pre>
<h3 id="github-projects-and-repos-search-2">GitHub Projects and Repos Search 2</h3>
<p>This functionality is currently integrated as one of the endpoints, and I'm curious to see where it leads. My plan for tomorrow includes deploying everything on Cloud Run, though I must first address PostgreSQL initialization with pgvector, which requires enabling the extension—a task that is proving to be challenging directly through SQLAlchemy.</p>
<pre><code class="language-python">def fetch_repo_readmes(users, max_repos_per_user, access_token):
    github_api = GitHubAPI(access_token)
    all_readmes = []
    for user in tqdm(users, desc=&quot;Fetching repositories&quot;):
        repos = github_api.get_user_repos(user[&quot;login&quot;], max_repos=max_repos_per_user)
        for repo in repos:
            readme = github_api.get_readme(repo)
            if readme:
                all_readmes.append(
                    {
                        &quot;username&quot;: user[&quot;login&quot;],
                        &quot;repo_name&quot;: repo[&quot;name&quot;],
                        &quot;readme_text&quot;: readme,
                    }
                )
    return all_readmes
</code></pre>
<h3 id="cloud-deployment-and-sql-challenges">Cloud Deployment and SQL Challenges</h3>
<p>For deploying on Cloud SQL in production through Cloud Run, I've encountered a workaround that involves using an SQL file for extension creation, which, while not the most elegant solution, serves our immediate needs. The importance of elegance is currently low on the priority list. I've found guidance for Cloud SQL integration with pgvector <a href="https://cloud.google.com/blog/products/databases/using-pgvector-llms-and-langchain-with-google-cloud-databases">here</a>, but further investigation is needed.</p>
<p>This episode marks another step forward in our project, blending backend development with vector databases and AI applications. Stay tuned for more updates as we continue to navigate through these exciting challenges and opportunities.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
